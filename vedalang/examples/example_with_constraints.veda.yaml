# Example: User Constraints in VedaLang
# Demonstrates emission_cap and activity_share constraint types.
#
# NOTE: This compiles to valid TableIR, but xl2times validation currently fails
# because UC tables require uc_sets metadata (R_E, T_E) that veda_emit_excel
# does not yet emit. This is a known limitation - see tests/test_golden_fixtures.py.
model:
  name: ConstraintDemo
  description: Model with CO2 cap and renewable energy target

  regions:
    - REG1

  start_year: 2020
  time_periods: [10, 10, 10]

  commodities:
    - name: NG
      type: energy
      unit: PJ
      description: Natural Gas

    - name: ELC
      type: energy
      unit: PJ
      description: Electricity

    - name: CO2
      type: emission
      unit: Mt
      description: Carbon dioxide emissions

  processes:
    - name: PP_CCGT
      description: Combined cycle gas turbine
      sets: [ELE]
      primary_commodity_group: NRGO
      inputs:
        - commodity: NG
      outputs:
        - commodity: ELC
        - commodity: CO2
          share: 0.05
      efficiency: 0.55

    - name: PP_WIND
      description: Onshore wind plant
      sets: [ELE]
      primary_commodity_group: NRGO
      outputs:
        - commodity: ELC

    - name: PP_SOLAR
      description: Solar PV plant
      sets: [ELE]
      primary_commodity_group: NRGO
      outputs:
        - commodity: ELC

  constraints:
    # Emission cap: limit CO2 to 100 Mt initially, declining to 50 Mt by 2040
    - name: CO2_CAP
      type: emission_cap
      commodity: CO2
      years:
        "2020": 100
        "2040": 50
      interpolation: interp_extrap
      limtype: up

    # Renewable energy target: at least 30% of electricity from wind+solar
    - name: REN_TARGET
      type: activity_share
      commodity: ELC
      processes: [PP_WIND, PP_SOLAR]
      minimum_share: 0.30
